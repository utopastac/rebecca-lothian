function App(o){$.window=$(window),$.body=$("body"),$.ww=$.window.width(),$.wh=$.window.height(),$.mobile=Utils.checkMobile(),$.tablet=Utils.checkTablet(),($.mobile||$.tablet)&&$.body.removeClass("desktop"),$.useCssAnim=Modernizr.csstransforms3d,this.overlayOpen=!1,this.overlay=$("#overlay"),this.overlayClose=$("#overlay-close",this.overlay),this.overlayContentContainer=$("#overlay-content",this.overlay),this.init(o)}App.prototype={init:function(o){$.History=window.History,$.window.resize(jQuery.proxy(this,"resizeElements")),this.setupElements(),$.History.Adapter.bind(window,"statechange",jQuery.proxy(this,"goToPage")),$(".internal").on("tap",jQuery.proxy(this,"linkClicked")),this.overlayClose.on("tap",jQuery.proxy(this,"backToHome"))},setupElements:function(){this.goToPage(),TweenMax.set(this.overlay,{autoAlpha:0,display:"none"})},linkClicked:function(o){var t=$(o.currentTarget),e=t.data("target"),n=t.data("title"),i={url:e,title:n,overlay:!0},a="?"+n;return $.History.pushState(i,"",a),o.preventDefault(),!1},goToPage:function(o){var t=$.History.getState();t.data.overlay?this.loadContent(t.data.url,t.data.title):this.goHome()},loadContent:function(o,t){this.overlayContentContainer.html(""),TweenMax.set(this.overlayContentContainer,{alpha:0}),this.openOverlay(),this.overlayContentContainer.load(o+" #main-content",jQuery.proxy(this,"contentLoaded"))},contentLoaded:function(o){TweenMax.to(this.overlayContentContainer,.5,{alpha:1,ease:Power2.easeOut})},openOverlay:function(o){this.windowScroll=$.window.scrollTop(),$.body.css("top",-this.windowScroll+"px").addClass("inActive"),TweenMax.to(this.overlay,.4,{autoAlpha:1,display:"block",onStart:jQuery.proxy(this,"overlayOpening")})},overlayOpening:function(o){this.overlay.scrollTop(0)},closeOverlay:function(o){TweenMax.to(this.overlay,.4,{autoAlpha:0,display:"none",onComplete:jQuery.proxy(this,"overlayClosed")})},overlayClosed:function(o){$.body.removeClass("inActive"),$.window.scrollTop(this.windowScroll)},backToHome:function(){this.addHomeHistory(),this.goHome()},addHomeHistory:function(){var o={overlay:!1};History.pushState(o,"","?")},goHome:function(){this.closeOverlay()},resizeElements:function(o){$.ww=$.window.width(),$.wh=$.window.height()}};